import{$ as x,Ac as ct,Cc as xt,D as tt,Fa as ot,G as M,Ha as it,I as et,Ia as Ct,Ja as st,L as nt,M as rt,Nc as V,O as bt,P as Dt,Ra as Pt,U as wt,X as T,Z as Nt,a as l,b as It,ba as At,ca as jt,fa as f,ga as G,i as q,ia as h,id as Gt,k as W,ka as u,la as d,n as w,o as Mt,oa as Rt,p as F,q as Tt,qb as O,s as J,sa as k,t as I,u as C,ub as at,v as Q,x as N,z as P,za as Ft}from"./chunk-IQEXUZMM.js";function ut(e,t){let i=!t?.manualCleanup;i&&!t?.injector&&Ft(ut);let n=i?t?.injector?.get(st)??d(st):null,r;t?.requireSync?r=at({kind:0}):r=at({kind:1,value:t?.initialValue});let o=e.subscribe({next:s=>r.set({kind:1,value:s}),error:s=>{if(t?.rejectErrors)throw s;r.set({kind:2,error:s})}});return n?.onDestroy(o.unsubscribe.bind(o)),V(()=>{let s=r();switch(s.kind){case 1:return s.value;case 2:throw s.error;case 0:throw new jt(601,"`toSignal()` called with `requireSync` but `Observable` did not emit synchronously.")}})}var v="NGXS_META",ft="NGXS_OPTIONS_META",lt="NGXS_SELECTOR_META";function pt(e){if(!e.hasOwnProperty(v)){let t={name:null,actions:{},defaults:{},path:null,makeRootSelector(i){return i.getStateGetter(t.name)},children:[]};Object.defineProperty(e,v,{value:t})}return b(e)}function b(e){return e[v]}function kt(e){return e.hasOwnProperty(lt)||Object.defineProperty(e,lt,{value:{makeRootSelector:null,originalFn:null,containerClass:null,selectorName:null,getSelectorOptions:()=>({})}}),ht(e)}function ht(e){return e[lt]}function fe(e,t){return e===t}function pe(e,t,i){if(t===null||i===null||t.length!==i.length)return!1;let n=t.length;for(let r=0;r<n;r++)if(!e(t[r],i[r]))return!1;return!0}function B(e,t=fe){let i=null,n=null;function r(){return pe(t,i,arguments)||(n=e.apply(null,arguments)),i=arguments,n}return r.reset=function(){i=null,n=null},r}var he=!1,ge=(()=>{let t=class t{static set(n){this._value=n}static pop(){let n=this._value;return this._value={},n}};t._value={};let e=t;return e})(),gt=new h(he?"INITIAL_STATE_TOKEN":"",{providedIn:"root",factory:()=>ge.pop()}),$=(()=>{let t=class t extends F{constructor(){super(1)}bootstrap(){this.next(!0),this.complete()}};t.\u0275fac=function(r){return new(r||t)},t.\u0275prov=f({token:t,factory:t.\u0275fac,providedIn:"root"});let e=t;return e})(),Vt=!1,Ut=new h(Vt?"\u0275NGXS_STATE_FACTORY":""),Bt=new h(Vt?"\u0275NGXS_STATE_CONTEXT_FACTORY":"");function $t(e){let t=[],i=!1;return function(...r){if(i){t.unshift(r);return}for(i=!0,e(...r);t.length>0;){let o=t.pop();o&&e(...o)}i=!1}}var U=class extends w{constructor(){super(...arguments),this._orderedNext=$t(t=>super.next(t))}next(t){this._orderedNext(t)}},dt=class extends Mt{constructor(t){super(t),this._orderedNext=$t(i=>super.next(i)),this._currentValue=t}getValue(){return this._currentValue}next(t){this._currentValue=t,this._orderedNext(t)}},X=(()=>{let t=class t extends dt{constructor(){super({}),this.state=ut(this,{manualCleanup:!0,requireSync:!0})}ngOnDestroy(){this.complete()}};t.\u0275fac=function(r){return new(r||t)},t.\u0275prov=f({token:t,factory:t.\u0275fac,providedIn:"root"});let e=t;return e})();var L=(()=>{let t=class t{};t.type="@@INIT";let e=t;return e})(),Z=(()=>{let t=class t{constructor(n){this.addedStates=n}};t.type="@@UPDATE_STATE";let e=t;return e})(),ye=!1,Xt=new h(ye?"NGXS_PLUGINS":"");function A(e){return e.constructor?.type||e.type}var St=(e,t,i)=>{e=l({},e);let n=t.split("."),r=n.length-1;return n.reduce((o,s,a)=>(a===r?o[s]=i:o[s]=Array.isArray(o[s])?o[s].slice():l({},o[s]),o&&o[s]),e),e},Y=(e,t)=>t.split(".").reduce((i,n)=>i&&i[n],e);function Lt(e){return typeof e=="function"}var me=(()=>{let t=class t{enter(n){return n()}leave(n){return n()}};t.\u0275fac=function(r){return new(r||t)},t.\u0275prov=f({token:t,factory:t.\u0275fac,providedIn:"root"});let e=t;return e})();function ve(e,t,i){throw new Error(`State name '${e}' from ${t} already exists in ${i}.`)}function Ee(e){throw new Error(`States must be decorated with @State() decorator, but "${e}" isn't.`)}function Oe(e){return`'${e}' class should be decorated with @Injectable() right after the @State() decorator`}function _e(e){let t="You have an invalid state initialization order. This typically occurs when `NgxsModule.forFeature`\nor `provideStates` is called before `NgxsModule.forRoot` or `provideStore`.\nOne example is when `NgxsRouterPluginModule.forRoot` is called before `NgxsModule.forRoot`.";if(e){let i=Object.keys(e).map(n=>`"${n}"`);t+=`
Feature states added before the store initialization is complete: ${i.join(", ")}.`}return t}var Kt=(()=>{let t=class t{constructor(n,r){this._ngZone=n,this._platformId=r}enter(n){return Gt(this._platformId)?this.runInsideAngular(n):this.runOutsideAngular(n)}leave(n){return this.runInsideAngular(n)}runInsideAngular(n){return O.isInAngularZone()?n():this._ngZone.run(n)}runOutsideAngular(n){return O.isInAngularZone()?this._ngZone.runOutsideAngular(n):n()}};t.\u0275fac=function(r){return new(r||t)(u(O),u(Pt))},t.\u0275prov=f({token:t,factory:t.\u0275fac,providedIn:"root"});let e=t;return e})();var qt=!1,Wt=new h(qt?"CUSTOM_NGXS_EXECUTION_STRATEGY":""),Ie=new h(qt?"NGXS_EXECUTION_STRATEGY":"",{providedIn:"root",factory:()=>{let e=d(O),t=d(Rt),i=t.get(Wt),n=e instanceof O;return i?t.get(i):t.get(n?Kt:me)}}),Jt=(()=>{let t=class t{constructor(n){this._executionStrategy=n}enter(n){return this._executionStrategy.enter(n)}leave(n){return this._executionStrategy.leave(n)}};t.\u0275fac=function(r){return new(r||t)(u(Ie))},t.\u0275prov=f({token:t,factory:t.\u0275fac,providedIn:"root"});let e=t;return e})(),Qt=e=>(...t)=>e.shift()(...t,(...n)=>Qt(e)(...n));function z(e){return t=>new W(i=>t.subscribe({next(n){e.leave(()=>i.next(n))},error(n){e.leave(()=>i.error(n))},complete(){e.leave(()=>i.complete())}}))}var te=(()=>{let t=class t extends U{ngOnDestroy(){this.complete()}};t.\u0275fac=(()=>{let n;return function(o){return(n||(n=ot(t)))(o||t)}})(),t.\u0275prov=f({token:t,factory:t.\u0275fac,providedIn:"root"});let e=t;return e})();var mt=(()=>{let t=class t{constructor(n,r){this._parentManager=n,this._pluginHandlers=r,this.plugins=[],this.registerHandlers()}get rootPlugins(){return this._parentManager&&this._parentManager.plugins||this.plugins}registerHandlers(){let n=this.getPluginHandlers();this.rootPlugins.push(...n)}getPluginHandlers(){return(this._pluginHandlers||[]).map(r=>r.handle?r.handle.bind(r):r)}};t.\u0275fac=function(r){return new(r||t)(u(t,12),u(Xt,8))},t.\u0275prov=f({token:t,factory:t.\u0275fac});let e=t;return e})(),vt=new WeakMap,Zt=q.onUnhandledError;q.onUnhandledError=function(e){let t=vt.get(e);if(t)t();else if(Zt)Zt.call(this,e);else throw e};function Me(e){let t=vt.get(e);return t?(t(),!0):!1}function Te(e,t){if(e!==null&&typeof e=="object"){let i=!1;vt.set(e,()=>{i||(i=!0,t())})}return e}function be(e){return t=>{let i=t.subscribe({error:n=>{e.runOutsideAngular(()=>{queueMicrotask(()=>{i&&Me(n)})})}});return new W(n=>(i?.unsubscribe(),i=null,t.subscribe(n)))}}var ee=(()=>{let t=class t extends w{};t.\u0275fac=(()=>{let n;return function(o){return(n||(n=ot(t)))(o||t)}})(),t.\u0275prov=f({token:t,factory:t.\u0275fac,providedIn:"root"});let e=t;return e})(),De=(()=>{let t=class t{constructor(n,r,o,s,a,c){this._ngZone=n,this._actions=r,this._actionResults=o,this._pluginManager=s,this._stateStream=a,this._ngxsExecutionStrategy=c}dispatch(n){return this._ngxsExecutionStrategy.enter(()=>this.dispatchByEvents(n)).pipe(be(this._ngZone),z(this._ngxsExecutionStrategy))}dispatchByEvents(n){return Array.isArray(n)?n.length===0?I(void 0):tt(n.map(r=>this.dispatchSingle(r))).pipe(N(()=>{})):this.dispatchSingle(n)}dispatchSingle(n){let r=this._stateStream.getValue(),o=this._pluginManager.plugins;return Qt([...o,(s,a)=>{s!==r&&this._stateStream.next(s);let c=this.getActionResultStream(a);return c.subscribe(S=>this._actions.next(S)),this._actions.next({action:a,status:"DISPATCHED"}),this.createDispatchObservable(c)}])(r,n).pipe(T())}getActionResultStream(n){return this._actionResults.pipe(M(r=>r.action===n&&r.status!=="DISPATCHED"),rt(1),T())}createDispatchObservable(n){return n.pipe(Dt(r=>{switch(r.status){case"SUCCESSFUL":return I(this._stateStream.getValue());case"ERRORED":return C(()=>r.error);default:return Tt}})).pipe(T())}};t.\u0275fac=function(r){return new(r||t)(u(O),u(te),u(ee),u(mt),u(X),u(Jt))},t.\u0275prov=f({token:t,factory:t.\u0275fac,providedIn:"root"});let e=t;return e})(),Et=!1,ne=new h(Et?"ROOT_STATE_TOKEN":""),re=new h(Et?"FEATURE_STATE_TOKEN":""),oe=new h(Et?"NGXS_OPTIONS":""),j=(()=>{let t=class t{constructor(){this.compatibility={strictContentSecurityPolicy:!1},this.executionStrategy=Kt,this.selectorOptions={injectContainerState:!1,suppressErrors:!1}}};t.\u0275fac=function(r){return new(r||t)},t.\u0275prov=f({token:t,factory:()=>(()=>{let n=new t,r=d(oe);return It(l(l({},n),r),{selectorOptions:l(l({},n.selectorOptions),r.selectorOptions)})})(),providedIn:"root"});let e=t;return e})(),yt=class{constructor(t,i,n){this.previousValue=t,this.currentValue=i,this.firstChange=n}};var R=(()=>{let t=class t{constructor(n,r,o){this._stateStream=n,this._dispatcher=r,this._config=o}getRootStateOperations(){return{getState:()=>this._stateStream.getValue(),setState:r=>this._stateStream.next(r),dispatch:r=>this._dispatcher.dispatch(r)}}setStateToTheCurrentWithNew(n){let r=this.getRootStateOperations(),o=r.getState();r.setState(l(l({},o),n.defaults))}};t.\u0275fac=function(r){return new(r||t)(u(X),u(De),u(j))},t.\u0275prov=f({token:t,factory:t.\u0275fac,providedIn:"root"});let e=t;return e})();var we=!1;function Ne(e,t,i){return n=>{let{argumentSelectorFunctions:r,selectorOptions:o}=je(n,e,t),{suppressErrors:s}=o;return function(c){let S=r.map(g=>g(c));try{return i(...S)}catch(g){if(s&&g instanceof TypeError)return;throw we&&console.error("The selector below has thrown an error upon invocation. Please check for any unsafe property access that may result in null or undefined values.",e.originalFn),g}}}}function Ae(e,t){let i=t&&t.containerClass,r=B(function(...s){let a=e.apply(i,s);return a instanceof Function?B.apply(null,[a]):a});return Object.setPrototypeOf(r,e),r}function je(e,t,i=[]){let n=t.getSelectorOptions(),r=e.getSelectorOptions(n),s=Re(i,r,t.containerClass).map(a=>ie(a)(e));return{selectorOptions:r,argumentSelectorFunctions:s}}function Re(e=[],t,i){let n=[],r=t.injectContainerState||e.length===0;return i&&r&&b(i)&&n.push(i),n.push(...e),n}function ie(e){let t=ht(e)||b(e);return t&&t.makeRootSelector||(()=>e)}var Ot=!1;function Fe(e){return t=>{for(let i=0;i<e.length;i++){if(!t)return;t=t[e[i]]}return t}}function Ce(e){let t=e,i="store."+t[0],n=0,r=t.length,o=i;for(;++n<r;)o=o+" && "+(i=i+"."+t[n]);return new Function("store","return "+o+";")}var Pe=new h(Ot?"PROP_GETTER":"",{providedIn:"root",factory:()=>d(j).compatibility?.strictContentSecurityPolicy?Fe:Ce});function xe(e){let t=i=>{let n=e.find(r=>r===i);if(Ot&&!n)throw new Error(`Child state not found: ${i}. \r
You may have forgotten to add states to module`);return n[v].name};return e.reduce((i,n)=>{let{name:r,children:o}=n[v];return i[r]=(o||[]).map(t),i},{})}function Ge(e){return e.reduce((t,i)=>{let n=i[v];return t[n.name]=i,t},{})}function ke(e,t={}){let i=(n,r)=>{for(let o in n)if(n.hasOwnProperty(o)&&n[o].indexOf(r)>=0){let s=i(n,o);return s!==null?`${s}.${o}`:o}return null};for(let n in e)if(e.hasOwnProperty(n)){let r=i(e,n);t[n]=r?`${r}.${n}`:n}return t}function Ve(e){let t=[],i={},n=(r,o=[])=>{Array.isArray(o)||(o=[]),o.push(r),i[r]=!0,e[r].forEach(s=>{if(Ot&&o.indexOf(s)>=0)throw new Error(`Circular dependency '${s}' is required by '${r}': ${o.join(" -> ")}`);i[s]||n(s,o.slice(0))}),t.indexOf(r)<0&&t.push(r)};return Object.keys(e).forEach(r=>n(r)),t.reverse()}function Ue(...e){return Be(e,["DISPATCHED"])}function Be(e,t,i=Xe){let n=Le(e),r=t&&Ze(t);return function(o){return o.pipe($e(n,r),i())}}function $e(e,t){return M(i=>{let n=A(i.action),r=e[n],o=t?t[i.status]:!0;return r&&o})}function Xe(){return N(e=>e.action)}function Le(e){return e.reduce((t,i)=>(t[A(i)]=!0,t),{})}function Ze(e){return e.reduce((t,i)=>(t[i]=!0,t),{})}function Ye(e){return t=>{let i=l({},t);for(let n in e)i[n]=e[n];return i}}var _t=(()=>{let t=class t{constructor(n){this._internalStateOperations=n}createStateContext(n){let r=this._internalStateOperations.getRootStateOperations();return{getState(){let o=r.getState();return ae(o,n.path)},patchState(o){let s=r.getState(),a=Ye(o);Yt(r,s,a,n.path)},setState(o){let s=r.getState();Lt(o)?Yt(r,s,o,n.path):se(r,s,o,n.path)},dispatch(o){return r.dispatch(o)}}}};t.\u0275fac=function(r){return new(r||t)(u(R))},t.\u0275prov=f({token:t,factory:t.\u0275fac,providedIn:"root"});let e=t;return e})();function se(e,t,i,n){let r=St(t,n,i);return e.setState(r),r}function Yt(e,t,i,n){let r=ae(t,n),o=i(r);return se(e,t,o,n)}function ae(e,t){return Y(e,t)}var Kn=new RegExp("^[a-zA-Z0-9_]+$");function He(e,t,i){let n=i[e];n&&n!==t&&ve(e,t.name,n.name)}function ze(e){e.forEach(t=>{b(t)||Ee(t.name)})}function Ke(e){We(e)||qe(e)||console.warn(Oe(e.name))}function qe(e){return!!e.\u0275prov}function We(e){return(e.__annotations__||[]).some(i=>i?.ngMetadataName==="Injectable")}var Je=!1,Qe=new h(Je?"NGXS_DEVELOPMENT_OPTIONS":"",{providedIn:"root",factory:()=>({warnOnUnhandledActions:!0})}),tn=(()=>{let t=class t{constructor(n){this._ignoredActions=new Set([L.type,Z.type]),typeof n.warnOnUnhandledActions=="object"&&this.ignoreActions(...n.warnOnUnhandledActions.ignore)}ignoreActions(...n){for(let r of n)this._ignoredActions.add(r.type)}warn(n){Array.from(this._ignoredActions).some(o=>o===A(n))||(n=n.constructor&&n.constructor.name!=="Object"?n.constructor.name:n.type,console.warn(`The ${n} action has been dispatched but hasn't been handled. This may happen if the state with an action handler for this action is not registered.`))}};t.\u0275fac=function(r){return new(r||t)(u(Qe))},t.\u0275prov=f({token:t,factory:t.\u0275fac});let e=t;return e})(),en=(()=>{let t=class t{constructor(){this._ngZone=d(O),this._errorHandler=d(Ct)}handleError(n,r){this._ngZone.runOutsideAngular(()=>this._errorHandler.handleError(n))}};t.\u0275fac=function(r){return new(r||t)},t.\u0275prov=f({token:t,factory:t.\u0275fac,providedIn:"root"});let e=t;return e})(),H=!1;function nn(e){let t=e===void 0?{}:e;return e&&(Array.isArray(e)?t=e.slice():typeof e=="object"&&(t=l({},e))),t}var D=(()=>{let t=class t{constructor(n,r,o,s,a,c,S){this._injector=n,this._config=r,this._parentFactory=o,this._actions=s,this._actionResults=a,this._stateContextFactory=c,this._initialState=S,this._actionsSubscription=null,this._propGetter=d(Pe),this._ngxsUnhandledErrorHandler=null,this._states=[],this._statesByName={},this._statePaths={},this.getRuntimeSelectorContext=B(()=>{let g=this,_=g._propGetter;function p(E){let y=g.statePaths[E];return y?_(y.split(".")):null}return this._parentFactory?this._parentFactory.getRuntimeSelectorContext():{getStateGetter(E){let y=p(E);return y||((...le)=>(y||(y=p(E)),y?y(...le):void 0))},getSelectorOptions(E){let y=g._config.selectorOptions;return l(l({},y),E||{})}}})}get states(){return this._parentFactory?this._parentFactory.states:this._states}get statesByName(){return this._parentFactory?this._parentFactory.statesByName:this._statesByName}get statePaths(){return this._parentFactory?this._parentFactory.statePaths:this._statePaths}ngOnDestroy(){this._actionsSubscription?.unsubscribe()}add(n){H&&ze(n);let{newStates:r}=this.addToStatesMap(n);if(!r.length)return[];let o=xe(r),s=Ve(o),a=ke(o),c=Ge(r),S=[];for(let g of s){let _=c[g],p=a[g],m=_[v];this.addRuntimeInfoToMeta(m,p),H&&Ke(_);let E={name:g,path:p,isInitialised:!1,actions:m.actions,instance:this._injector.get(_),defaults:nn(m.defaults)};this.hasBeenMountedAndBootstrapped(g,p)||S.push(E),this.states.push(E)}return S}addAndReturnDefaults(n){let r=n||[],o=this.add(r);return{defaults:o.reduce((a,c)=>St(a,c.path,c.defaults),{}),states:o}}connectActionHandlers(){if(this._parentFactory||this._actionsSubscription!==null)return;let n=new w;this._actionsSubscription=this._actions.pipe(M(r=>r.status==="DISPATCHED"),P(r=>{n.next(r);let o=r.action;return this.invokeActions(n,o).pipe(N(()=>({action:o,status:"SUCCESSFUL"})),nt({action:o,status:"CANCELED"}),et(s=>{let a=this._ngxsUnhandledErrorHandler||=this._injector.get(en),c=Te(s,()=>a.handleError(s,{action:o}));return I({action:o,status:"ERRORED",error:c})}))})).subscribe(r=>this._actionResults.next(r))}invokeActions(n,r){let o=A(r),s=[],a=!1;for(let c of this.states){let S=c.actions[o];if(S)for(let g of S){let _=this._stateContextFactory.createStateContext(c);try{let p=c.instance[g.fn](_,r);ct(p)&&(p=J(p)),Q(p)?(p=p.pipe(P(m=>ct(m)?J(m):Q(m)?m:I(m)),nt({})),g.options.cancelUncompleted&&(p=p.pipe(x(n.pipe(Ue(r)))))):p=I({}).pipe(T()),s.push(p)}catch(p){s.push(C(p))}a=!0}}if(H&&!a){let c=this._injector.get(tn,null);c&&c.warn(r)}return s.length||s.push(I({})),tt(s)}addToStatesMap(n){let r=[],o=this.statesByName;for(let s of n){let a=b(s).name;H&&He(a,s,o),!o[a]&&(r.push(s),o[a]=s)}return{newStates:r}}addRuntimeInfoToMeta(n,r){this.statePaths[n.name]=r,n.path=r}hasBeenMountedAndBootstrapped(n,r){let o=Y(this._initialState,r)!==void 0;return this.statesByName[n]&&o}};t.\u0275fac=function(r){return new(r||t)(u(it),u(j),u(t,12),u(te),u(ee),u(_t),u(gt,8))},t.\u0275prov=f({token:t,factory:t.\u0275fac});let e=t;return e})(),K=(()=>{let t=class t{constructor(n,r,o,s,a,c){this._stateStream=n,this._internalStateOperations=r,this._config=o,this._internalExecutionStrategy=s,this._stateFactory=a,this._selectableStateStream=this._stateStream.pipe(z(this._internalExecutionStrategy),T({bufferSize:1,refCount:!0})),this.initStateStream(c)}dispatch(n){return this._internalStateOperations.getRootStateOperations().dispatch(n)}select(n){let r=this.getStoreBoundSelectorFn(n);return this._selectableStateStream.pipe(N(r),et(o=>this._config.selectorOptions.suppressErrors&&o instanceof TypeError?I(void 0):C(o)),bt(),z(this._internalExecutionStrategy))}selectOnce(n){return this.select(n).pipe(rt(1))}selectSnapshot(n){return this.getStoreBoundSelectorFn(n)(this._stateStream.getValue())}selectSignal(n){let r=this.getStoreBoundSelectorFn(n);return V(()=>r(this._stateStream.state()))}subscribe(n){return this._selectableStateStream.pipe(z(this._internalExecutionStrategy)).subscribe(n)}snapshot(){return this._internalStateOperations.getRootStateOperations().getState()}reset(n){this._internalStateOperations.getRootStateOperations().setState(n)}getStoreBoundSelectorFn(n){let r=ie(n),o=this._stateFactory.getRuntimeSelectorContext();return r(o)}initStateStream(n){let r=this._stateStream.value;(!r||Object.keys(r).length===0)&&this._stateStream.next(n)}};t.\u0275fac=function(r){return new(r||t)(u(X),u(R),u(j),u(Jt),u(D),u(gt,8))},t.\u0275prov=f({token:t,factory:t.\u0275fac,providedIn:"root"});let e=t;return e})(),rn=!1,on=new h(rn?"NGXS_PREBOOT_FNS":"");var sn=(()=>{let t=class t{constructor(n,r){t.store=n,t.config=r}ngOnDestroy(){t.store=null,t.config=null}};t.store=null,t.config=null,t.\u0275fac=function(r){return new(r||t)(u(K),u(j))},t.\u0275prov=f({token:t,factory:t.\u0275fac,providedIn:"root"});let e=t;return e})(),an=!1,ce=(()=>{let t=class t{constructor(n,r,o,s){this._store=n,this._internalStateOperations=r,this._stateContextFactory=o,this._appBootstrappedState=s,this._destroy$=new F(1)}ngOnDestroy(){this._destroy$.next()}ngxsBootstrap(n,r){an&&(n instanceof L?this._initStateHasBeenDispatched=!0:n instanceof Z&&!this._initStateHasBeenDispatched&&console.error(_e(n.addedStates))),this._internalStateOperations.getRootStateOperations().dispatch(n).pipe(M(()=>!!r),At(()=>this._invokeInitOnStates(r.states)),P(()=>this._appBootstrappedState),M(o=>!!o),x(this._destroy$)).subscribe(()=>this._invokeBootstrapOnStates(r.states))}_invokeInitOnStates(n){for(let r of n){let o=r.instance;o.ngxsOnChanges&&this._store.select(s=>Y(s,r.path)).pipe(Nt(void 0),wt(),x(this._destroy$)).subscribe(([s,a])=>{let c=new yt(s,a,!r.isInitialised);o.ngxsOnChanges(c)}),o.ngxsOnInit&&o.ngxsOnInit(this._getStateContext(r)),r.isInitialised=!0}}_invokeBootstrapOnStates(n){for(let r of n){let o=r.instance;o.ngxsAfterBootstrap&&o.ngxsAfterBootstrap(this._getStateContext(r))}}_getStateContext(n){return this._stateContextFactory.createStateContext(n)}};t.\u0275fac=function(r){return new(r||t)(u(K),u(R),u(_t),u($))},t.\u0275prov=f({token:t,factory:t.\u0275fac,providedIn:"root"});let e=t;return e})(),ue=!1;function cn(){(d(on,{optional:!0})||[]).forEach(s=>s());let t=d(D),i=d(R);d(K),d(sn);let n=d(ne,{optional:!0})||[],r=d(ce),o=t.addAndReturnDefaults(n);i.setStateToTheCurrentWithNew(o),t.connectActionHandlers(),r.ngxsBootstrap(new L,o)}function un(){d(K);let e=d(R),t=d(D),i=d(re,{optional:!0})||[],n=d(ce),r=i.reduce((s,a)=>s.concat(a),[]),o=t.addAndReturnDefaults(r);o.states.length&&(e.setStateToTheCurrentWithNew(o),n.ngxsBootstrap(new Z(o.defaults),o))}var qn=new h(ue?"NGXS_ROOT_STORE_INITIALIZER":""),Wn=new h(ue?"NGXS_FEATURE_STORE_INITIALIZER":"");var ln=(()=>{let t=class t{constructor(){cn()}};t.\u0275fac=function(r){return new(r||t)},t.\u0275mod=k({type:t}),t.\u0275inj=G({});let e=t;return e})(),dn=(()=>{let t=class t{constructor(){un()}};t.\u0275fac=function(r){return new(r||t)},t.\u0275mod=k({type:t}),t.\u0275inj=G({});let e=t;return e})();function fn(e,t){return[D,mt,...e,{provide:ne,useValue:e},{provide:xt,useFactory:()=>{let i=d($);return()=>i.bootstrap()},multi:!0},{provide:oe,useValue:t},{provide:Wt,useValue:t.executionStrategy},{provide:Bt,useExisting:_t},{provide:Ut,useExisting:D}]}function pn(e){return[D,mt,...e,{provide:re,multi:!0,useValue:e}]}var Jn=(()=>{let t=class t{static forRoot(n=[],r={}){return{ngModule:ln,providers:fn(n,r)}}static forFeature(n=[]){return{ngModule:dn,providers:pn(n)}}};t.\u0275fac=function(r){return new(r||t)},t.\u0275mod=k({type:t}),t.\u0275inj=G({});let e=t;return e})();function Qn(e,t){return(i,n,r)=>{let o=pt(i.constructor),s=Array.isArray(e)?e:[e];for(let a of s){let c=a.type;o.actions[c]||(o.actions[c]=[]),o.actions[c].push({fn:n,options:t||{},type:c})}}}function tr(e){return t=>{let i=t,n=pt(i),r=Object.getPrototypeOf(i),o=hn(r,e);gn({meta:n,inheritedStateClass:r,optionsWithInheritance:o}),i[ft]=o}}function hn(e,t){let i=e[ft]||{};return l(l({},i),t)}function gn(e){let{meta:t,inheritedStateClass:i,optionsWithInheritance:n}=e,{children:r,defaults:o,name:s}=n,a=typeof s=="string"?s:s&&s.getName()||null;if(i.hasOwnProperty(v)){let c=i[v]||{};t.actions=l(l({},t.actions),c.actions)}t.children=r,t.defaults=o,t.name=a}var Ht="NGXS_SELECTOR_OPTIONS_META",zt={getOptions:e=>e&&e[Ht]||{},defineOptions:(e,t)=>{e&&(e[Ht]=t)}};function Sn(e,t){let i=kt(e);i.originalFn=e;let n=()=>({});t&&(i.containerClass=t.containerClass,i.selectorName=t.selectorName||null,n=t.getSelectorOptions||n);let r=l({},i);return i.getSelectorOptions=()=>yn(r,n()),i}function yn(e,t){return l(l(l(l({},zt.getOptions(e.containerClass)||{}),zt.getOptions(e.originalFn)||{}),e.getSelectorOptions()||{}),t)}function mn(e,t,i){let n=Ae(t,i),r=Sn(t,i);return r.makeRootSelector=Ne(r,e,n),n}function er(e){return(t,i,n)=>{n||=Object.getOwnPropertyDescriptor(t,i);let r=n?.value,o=mn(e,r,{containerClass:t,selectorName:i.toString(),getSelectorOptions(){return{}}});return{configurable:!0,get(){return o},originalFn:r}}}export{K as a,Jn as b,Qn as c,tr as d,er as e};
